<div class="ui one column grid">
  <div class="computer only column">
    <h1 class="ui header centered white pt">Kerbal Space Program Delta-V Planner</h1>
  </div>
  <div class="mobile only column">
    <h1 class="ui header centered white pt">KSP Delta-V Planner</h1>
  </div>
</div>
<div class="ui header centered">
  <a aria-label="information" routerLink="information"
     class="clickable">
    <i class="large info circle white icon"></i>
  </a>
  <a aria-label="github" href="https://github.com/LoicViennois/KSP-DeltaV-Planner">
    <i class="large github white icon"></i>
  </a>
  <a aria-label="copyright" routerLink="copyright"
     class="clickable">
    <i class="large copyright white icon"></i>
  </a>
</div>
<div class="ui large form">
  <div class="field">
    <label>From:</label>
    <ng-template let-option #optionTemplate>
      <i *ngIf="!option.isPlanet" class="icon caret right pl"></i>
      <img class="ui avatar image" [src]="option.imageUrl" alt="">
      {{ option.name }}
    </ng-template>
    <sui-select class="selection"
                [(ngModel)]="path.from"
                [options]="options"
                labelField="name"
                [optionTemplate]="optionTemplate"
                [isSearchable]="true"
                (selectedOptionChange)="pathFromChanged()"
                #selectFrom>
      <sui-select-option class="ui big" *ngFor="let option of selectFrom.filteredOptions"
                         [value]="option">
      </sui-select-option>
    </sui-select>
  </div>
  <div class="field mb-0">
    <div class="ui two column centered grid">
      <div class="column right aligned">
        <i class="icon retweet large clickable white" (click)="astroPathService.reversePath()"></i>
      </div>
      <div class="column left aligned">
        <i class="icon close large clickable white" (click)="astroPathService.reset()"></i>
      </div>
    </div>
  </div>
  <div class="field">
    <label>To:</label>
    <sui-select class="selection"
                [(ngModel)]="path.to"
                [options]="options"
                labelField="name"
                [optionTemplate]="optionTemplate"
                [isSearchable]="true"
                (selectedOptionChange)="pathToChanged()"
                #selectTo>
      <sui-select-option *ngFor="let option of selectTo.filteredOptions"
                         [value]="option">
      </sui-select-option>
    </sui-select>
  </div>
  <div class="field pt pb">
    <div class="ui three column centered grid">
      <div class="column right aligned">
        <sui-checkbox
          (click)="astroPathService.pathChanged(path)"
          [isDisabled]="astroPathService.isKerbinTrip"
          [(ngModel)]="path.landing">
          <span class="white">Landing</span>
        </sui-checkbox>
      </div>
      <div class="column center aligned">
        <sui-checkbox
          (click)="astroPathService.pathChanged(path)"
          [(ngModel)]="path.aerobraking">
          <span class="white">Aerobraking</span>
        </sui-checkbox>
      </div>
      <div class="column left aligned">
        <sui-checkbox
          (click)="astroPathService.pathChanged(path)"
          [isDisabled]="astroPathService.isKerbinTrip"
          [(ngModel)]="path.return">
          <span class="white">Return</span>
        </sui-checkbox>
      </div>
    </div>
  </div>
</div>
<div *ngIf="steps.length > 0"
     class="ui vertical big fluid menu">
  <a *ngFor="let step of steps" class="item not-clickable"
     (mouseenter)="stepSelectionService.selectionChanged(step)"
     (mouseleave)="stepSelectionService.selectionChanged(null)">
    <div *ngIf="landingInAtmosphere(step)"
         class="ui large label"
         [class.grey]="path.to.canLand"
         [class.red]="!path.to.canLand"
         suiPopup
         [popupHeader]="!path.to.canLand ? 'Landing here might not a good idea...': ''"
         popupText="Aerobraking is possible"
         popupPlacement="left">
      <i *ngIf="!path.to.canLand" class="ui icon ban"></i>
      <i class="ui icon cloud download"></i>
      {{ step.dv }} m/s
    </div>
    <div *ngIf="!landingInAtmosphere(step)"
         class="ui large grey label">{{ step.dv }} m/s
    </div>
    <ksp-step-message [step]="step"></ksp-step-message>
  </a>
  <a *ngIf="path.total" class="active item not-clickable"
     (mouseenter)="stepSelectionService.selectionChanged(path.total)"
     (mouseleave)="stepSelectionService.selectionChanged(null)">
    <div class="ui large left pointing blue label">{{ path.total.dv }} m/s</div>
    <ksp-step-message [step]="path.total"></ksp-step-message>
  </a>
</div>
